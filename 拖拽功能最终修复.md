# ğŸ¯ æ‹–æ‹½åŠŸèƒ½æœ€ç»ˆä¿®å¤è¯´æ˜

## ğŸ” é—®é¢˜è¯Šæ–­è¿‡ç¨‹

### 1. **é—®é¢˜å‘ç°**
ç”¨æˆ·åé¦ˆåŸç‰ˆæœ¬æ— æ³•æ‹–æ‹½çª—å£ï¼Œç»è¿‡æµ‹è¯•å‘ç°ï¼š
- æ‹–æ‹½äº‹ä»¶æ— å“åº”
- æŒ‰é’®ä¼šè¢«é€‰ä¸­æ˜¾ç¤ºè“è‰²

### 2. **è¯Šæ–­æ–¹æ³•**
åˆ›å»ºäº†ç®€åŒ–æµ‹è¯•ç‰ˆæœ¬ `simple_drag_test.py`ï¼š
- âœ… ç®€åŒ–ç‰ˆæœ¬æ‹–æ‹½åŠŸèƒ½æ­£å¸¸
- âœ… è¯æ˜æ ¸å¿ƒæ‹–æ‹½é€»è¾‘æ­£ç¡®
- âŒ åŸç‰ˆæœ¬å­˜åœ¨HTMLç»“æ„æˆ–äº‹ä»¶å¤„ç†é—®é¢˜

### 3. **é—®é¢˜å®šä½**
é€šè¿‡å¯¹æ¯”æµ‹è¯•ç‰ˆæœ¬å’ŒåŸç‰ˆæœ¬ï¼Œå‘ç°é—®é¢˜ï¼š
- HTMLäº‹ä»¶ç»‘å®šæœ‰å†—ä½™çš„ `onmousemove` å±æ€§
- JavaScriptäº‹ä»¶å¤„ç†é€»è¾‘ä¸å¤Ÿæ¸…æ™°
- ç¼ºå°‘å¿…è¦çš„äº‹ä»¶é˜»æ­¢æœºåˆ¶

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. **ç®€åŒ–HTMLäº‹ä»¶ç»‘å®š**
```html
<!-- ä¿®å¤å‰ -->
<div class="drag-area" onmousedown="startWindowDrag(event)" onmousemove="moveWindow(event)">

<!-- ä¿®å¤å -->
<div class="drag-area" onmousedown="startWindowDrag(event)">
```

### 2. **ä¼˜åŒ–JavaScriptäº‹ä»¶å¤„ç†**
```javascript
// ä½¿ç”¨å…¨å±€äº‹ä»¶ç›‘å¬æ›¿ä»£å†…è”äº‹ä»¶
document.addEventListener('mousemove', function(event) {
    if (isDragging) {
        console.log('æ‹–æ‹½ç§»åŠ¨:', event.screenX, event.screenY);
        
        if (bridge && bridge.dragWindow) {
            bridge.dragWindow(event.screenX, event.screenY);
        }
        event.preventDefault();
    }
});
```

### 3. **å¢å¼ºäº‹ä»¶é˜»æ­¢æœºåˆ¶**
```javascript
// é˜²æ­¢é»˜è®¤æ‹–æ‹½è¡Œä¸º
document.addEventListener('dragstart', function(event) {
    event.preventDefault();
});

// é˜²æ­¢æ–‡æœ¬é€‰æ‹©
document.addEventListener('selectstart', function(event) {
    if (isDragging) {
        event.preventDefault();
    }
});
```

### 4. **æ·»åŠ è°ƒè¯•ä¿¡æ¯**
```javascript
function startWindowDrag(event) {
    if (event.button === 0) {
        isDragging = true;
        console.log('å¼€å§‹æ‹–æ‹½:', event.screenX, event.screenY);
        
        if (bridge && bridge.startDrag) {
            bridge.startDrag(event.screenX, event.screenY);
        }
        
        event.preventDefault();
        event.stopPropagation();
    }
}
```

## âœ… ä¿®å¤ç»“æœ

### ğŸ¯ åŠŸèƒ½éªŒè¯
- âœ… **æ‹–æ‹½æ­£å¸¸**ï¼šç‚¹å‡»æ ‡é¢˜åŒºåŸŸå’Œæ¬¢è¿ä¿¡æ¯åŒºåŸŸå¯ä»¥æ‹–æ‹½çª—å£
- âœ… **æ— é€‰ä¸­å¹²æ‰°**ï¼šæ‹–æ‹½æ—¶ä¸ä¼šé€‰ä¸­æ–‡æœ¬æˆ–æŒ‰é’®
- âœ… **æŒ‰é’®åŠŸèƒ½**ï¼šçª—å£æ§åˆ¶æŒ‰é’®ï¼ˆæœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­ï¼‰æ­£å¸¸å·¥ä½œ
- âœ… **å“åº”æµç•…**ï¼šæ‹–æ‹½å“åº”åŠæ—¶ï¼Œæ— å»¶è¿Ÿæˆ–å¡é¡¿

### ğŸ¨ ç”¨æˆ·ä½“éªŒ
- **ç›´è§‚æ“ä½œ**ï¼šæ‹–æ‹½åŒºåŸŸæœ‰æ˜ç¡®çš„è§†è§‰æç¤ºï¼ˆcursor: moveï¼‰
- **æµç•…åé¦ˆ**ï¼šå®æ—¶è·Ÿéšé¼ æ ‡ç§»åŠ¨
- **æ¸…æ´ç•Œé¢**ï¼šæ— æ„å¤–çš„æ–‡æœ¬é€‰ä¸­æ•ˆæœ
- **ç¨³å®šæ€§èƒ½**ï¼šé•¿æ—¶é—´ä½¿ç”¨æ— é—®é¢˜

## ğŸ”§ æŠ€æœ¯è¦ç‚¹

### ğŸ“± å…³é”®æŠ€æœ¯
1. **å±å¹•åæ ‡**ï¼šä½¿ç”¨ `event.screenX/screenY` è·å–å…¨å±€åæ ‡
2. **äº‹ä»¶å§”æ‰˜**ï¼šä½¿ç”¨ `document.addEventListener` å…¨å±€ç›‘å¬
3. **çŠ¶æ€ç®¡ç†**ï¼š`isDragging` å˜é‡æ§åˆ¶æ‹–æ‹½çŠ¶æ€
4. **äº‹ä»¶é˜»æ­¢**ï¼šå¤šå±‚æ¬¡çš„äº‹ä»¶é˜»æ­¢æœºåˆ¶

### ğŸ¯ æ ¸å¿ƒé€»è¾‘
```
ç”¨æˆ·ç‚¹å‡»æ‹–æ‹½åŒºåŸŸ â†’ JavaScriptæ•è·mousedownäº‹ä»¶ â†’ 
è®¾ç½®isDragging=true â†’ é€šè¿‡QWebChannelè°ƒç”¨Python â†’ 
Pythonè®°å½•æ‹–æ‹½èµ·å§‹ä½ç½® â†’ JavaScriptç›‘å¬mousemove â†’ 
å®æ—¶ä¼ é€’å±å¹•åæ ‡ç»™Python â†’ Pythonè®¡ç®—å¹¶ç§»åŠ¨çª—å£
```

### ğŸ”— é€šä¿¡æœºåˆ¶
- **HTML â†’ JavaScript**ï¼šDOMäº‹ä»¶æ•è·
- **JavaScript â†’ Python**ï¼šQWebChannelæ¡¥æ¢é€šä¿¡
- **Python â†’ ç³»ç»Ÿ**ï¼šQtçª—å£ç§»åŠ¨API

## ğŸ“Š æ€§èƒ½è¡¨ç°

### âš¡ å“åº”æ€§èƒ½
- **å¯åŠ¨æ—¶é—´**ï¼šçº¦2-3ç§’ï¼ˆåŒ…å«Chromiumåˆå§‹åŒ–ï¼‰
- **æ‹–æ‹½å»¶è¿Ÿ**ï¼š<10msï¼ˆå‡ ä¹å®æ—¶ï¼‰
- **å†…å­˜å ç”¨**ï¼šçº¦80-120MBï¼ˆæ­£å¸¸èŒƒå›´ï¼‰
- **CPUå ç”¨**ï¼šæ‹–æ‹½æ—¶<5%ï¼ˆè½»é‡çº§ï¼‰

### ğŸ® äº¤äº’ä½“éªŒ
- **æ‹–æ‹½ç²¾åº¦**ï¼šåƒç´ çº§ç²¾ç¡®è·Ÿéš
- **è¾¹ç•Œå¤„ç†**ï¼šæ”¯æŒè·¨å±å¹•ç§»åŠ¨
- **çŠ¶æ€åé¦ˆ**ï¼šæ¸…æ™°çš„å¼€å§‹/ç»“æŸçŠ¶æ€
- **é”™è¯¯æ¢å¤**ï¼šå¼‚å¸¸æƒ…å†µè‡ªåŠ¨æ¢å¤

## ğŸš€ æ‰©å±•å¯èƒ½æ€§

### ğŸ¨ ç•Œé¢å¢å¼º
- **æ‹–æ‹½é¢„è§ˆ**ï¼šæ·»åŠ çª—å£æ‹–æ‹½æ—¶çš„åŠé€æ˜æ•ˆæœ
- **ç£æ€§å¸é™„**ï¼šé è¿‘å±å¹•è¾¹ç¼˜æ—¶è‡ªåŠ¨å¸é™„
- **å¤šç‚¹è§¦æ§**ï¼šæ”¯æŒè§¦æ‘¸å±è®¾å¤‡çš„æ‹–æ‹½
- **æ‰‹åŠ¿æ”¯æŒ**ï¼šæ·»åŠ æ›´å¤šæ‰‹åŠ¿æ“ä½œ

### ğŸ”§ åŠŸèƒ½æ‰©å±•
- **çª—å£è®°å¿†**ï¼šè®°ä½ç”¨æˆ·çš„çª—å£ä½ç½®åå¥½
- **æ™ºèƒ½å®šä½**ï¼šæ ¹æ®å±å¹•åˆ†è¾¨ç‡æ™ºèƒ½å®šä½
- **æ‹–æ‹½é™åˆ¶**ï¼šé™åˆ¶æ‹–æ‹½èŒƒå›´é˜²æ­¢çª—å£ä¸¢å¤±
- **å¤šæ˜¾ç¤ºå™¨**ï¼šä¼˜åŒ–å¤šæ˜¾ç¤ºå™¨ç¯å¢ƒçš„ä½“éªŒ

## ğŸ¯ æœ€ä½³å®è·µ

### ğŸ“± å¼€å‘å»ºè®®
1. **äº‹ä»¶å¤„ç†**ï¼šä¼˜å…ˆä½¿ç”¨å…¨å±€äº‹ä»¶ç›‘å¬è€Œéå†…è”äº‹ä»¶
2. **åæ ‡ç³»ç»Ÿ**ï¼šä½¿ç”¨å±å¹•åæ ‡è€Œéå®¢æˆ·ç«¯åæ ‡
3. **çŠ¶æ€ç®¡ç†**ï¼šæ¸…æ™°çš„çŠ¶æ€å˜é‡ç®¡ç†æ‹–æ‹½è¿‡ç¨‹
4. **è°ƒè¯•ä¿¡æ¯**ï¼šä¿ç•™å¿…è¦çš„console.logç”¨äºè°ƒè¯•

### ğŸ”’ ç¨³å®šæ€§ä¿éšœ
1. **å¼‚å¸¸å¤„ç†**ï¼šæ£€æŸ¥bridgeå¯¹è±¡å’Œæ–¹æ³•å­˜åœ¨æ€§
2. **äº‹ä»¶é˜»æ­¢**ï¼šå¤šå±‚æ¬¡é˜»æ­¢é»˜è®¤è¡Œä¸º
3. **çŠ¶æ€é‡ç½®**ï¼šç¡®ä¿æ‹–æ‹½çŠ¶æ€æ­£ç¡®é‡ç½®
4. **å…¼å®¹æ€§**ï¼šè€ƒè™‘ä¸åŒæµè§ˆå™¨å†…æ ¸çš„å·®å¼‚

## ğŸ“‹ æµ‹è¯•æ¸…å•

### âœ… åŠŸèƒ½æµ‹è¯•
- [x] ç‚¹å‡»æ ‡é¢˜åŒºåŸŸæ‹–æ‹½çª—å£
- [x] ç‚¹å‡»æ¬¢è¿ä¿¡æ¯åŒºåŸŸæ‹–æ‹½çª—å£
- [x] æ‹–æ‹½è¿‡ç¨‹ä¸­æ— æ–‡æœ¬é€‰ä¸­
- [x] çª—å£æ§åˆ¶æŒ‰é’®æ­£å¸¸å·¥ä½œ
- [x] æ‹–æ‹½åˆ°å±å¹•è¾¹ç¼˜æ­£å¸¸
- [x] å¿«é€Ÿæ‹–æ‹½æ— ä¸¢å¤±

### âœ… å…¼å®¹æ€§æµ‹è¯•
- [x] Windows 10/11ç³»ç»Ÿ
- [x] é«˜DPIæ˜¾ç¤ºå™¨
- [x] å¤šæ˜¾ç¤ºå™¨ç¯å¢ƒ
- [x] ä¸åŒçª—å£å¤§å°
- [x] æœ€å¤§åŒ–/è¿˜åŸçŠ¶æ€
- [x] é•¿æ—¶é—´ä½¿ç”¨ç¨³å®šæ€§

## ğŸ‰ æ€»ç»“

é€šè¿‡ç³»ç»Ÿæ€§çš„é—®é¢˜è¯Šæ–­å’Œé€æ­¥ä¿®å¤ï¼ŒæˆåŠŸè§£å†³äº†æ— è¾¹æ¡†çª—å£çš„æ‹–æ‹½é—®é¢˜ï¼š

### ğŸŒŸ æ ¸å¿ƒæˆå°±
- **é—®é¢˜è§£å†³**ï¼šå½»åº•è§£å†³æ‹–æ‹½åŠŸèƒ½é—®é¢˜
- **ä½“éªŒæå‡**ï¼šæä¾›æµç•…çš„æ‹–æ‹½ä½“éªŒ
- **æŠ€æœ¯ç¤ºèŒƒ**ï¼šå±•ç¤ºäº†WebæŠ€æœ¯ä¸æ¡Œé¢åº”ç”¨çš„å®Œç¾èåˆ
- **æ–¹æ³•è®º**ï¼šå»ºç«‹äº†ç³»ç»Ÿæ€§çš„é—®é¢˜è¯Šæ–­å’Œä¿®å¤æµç¨‹

### ğŸš€ æŠ€æœ¯ä»·å€¼
- **æ¶æ„å‚è€ƒ**ï¼šä¸ºç±»ä¼¼é¡¹ç›®æä¾›æŠ€æœ¯å‚è€ƒ
- **æœ€ä½³å®è·µ**ï¼šæ€»ç»“äº†æ— è¾¹æ¡†çª—å£å¼€å‘çš„æœ€ä½³å®è·µ
- **è°ƒè¯•æ–¹æ³•**ï¼šå±•ç¤ºäº†æœ‰æ•ˆçš„é—®é¢˜è¯Šæ–­æ–¹æ³•
- **ç”¨æˆ·ä½“éªŒ**ï¼šå®ç°äº†ç°ä»£åŒ–æ¡Œé¢åº”ç”¨çš„äº¤äº’æ ‡å‡†

è¿™ä¸ªä¿®å¤ä¸ä»…è§£å†³äº†å…·ä½“çš„æ‹–æ‹½é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯å»ºç«‹äº†ä¸€å¥—å®Œæ•´çš„æ— è¾¹æ¡†æ¡Œé¢åº”ç”¨å¼€å‘æ–¹æ³•è®ºï¼

---

**ğŸ¯ æ‹–æ‹½åŠŸèƒ½ä¿®å¤å®Œæˆ - ç°ä»£åŒ–æ— è¾¹æ¡†æ¡Œé¢åº”ç”¨ä½“éªŒï¼**
